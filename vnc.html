<!DOCTYPE html>
<html lang="en" class="noVNC_loading">
<head>
    <!-- ... c√°c style c√≥ s·∫µn ... -->
    
    <!-- TH√äM CSS M·ªöI V√ÄO ƒê√ÇY -->
    <style>
        /* B√†n ph√≠m ·∫£o */
        .keyboard-row {
            display: flex;
            justify-content: center;
            margin-bottom: 8px;
            flex-wrap: wrap;
        }

        .key {
            background: #ffffff;
            border: 1px solid #cccccc;
            border-radius: 4px;
            padding: 10px 14px;
            margin: 3px;
            cursor: pointer;
            user-select: none;
            min-width: 35px;
            text-align: center;
            font-size: 13px;
            font-weight: bold;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            transition: all 0.1s ease;
        }

        .key:hover {
            background: #e6f7ff;
            border-color: #1890ff;
        }

        .key:active {
            background: #bae7ff;
            transform: translateY(2px);
            box-shadow: 0 1px 2px rgba(0,0,0,0.2);
        }

        /* N√∫t b√†n ph√≠m ·∫£o */
        #noVNC_toggle_keyboard {
            background: linear-gradient(45deg, #1890ff, #096dd9);
            color: white;
            border: none;
            padding: 10px 15px;
            margin: 8px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 2px 8px rgba(24, 144, 255, 0.3);
        }

        #noVNC_toggle_keyboard:hover {
            background: linear-gradient(45deg, #40a9ff, #1890ff);
            transform: translateY(-1px);
        }

        /* Dropdown ch·∫ø ƒë·ªô chu·ªôt */
        #noVNC_mouse_mode {
            padding: 8px;
            border-radius: 4px;
            border: 1px solid #d9d9d9;
            background: white;
            margin-left: 5px;
        }

        /* Container b√†n ph√≠m ·∫£o */
        #noVNC_virtual_keyboard {
            background: #333;
            padding: 15px;
            border-radius: 10px;
            position: fixed;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            max-width: 90%;
            box-shadow: 0 4px 20px rgba(0,0,0,0.5);
        }
    </style>
    <!--
    noVNC example: simple example using default UI
    Copyright (C) 2019 The noVNC authors
    noVNC is licensed under the MPL 2.0 (see LICENSE.txt)
    This file is licensed under the 2-Clause BSD license (see LICENSE.txt).

    Connect parameters are provided in query string:
        http://example.com/?host=HOST&port=PORT&encrypt=1
    or the fragment:
        http://example.com/#host=HOST&port=PORT&encrypt=1
    -->
    <title>noVNC</title>

    <link rel="icon" type="image/x-icon" href="app/images/icons/novnc.ico">
    <meta name="theme-color" content="#313131">

    <!-- Apple iOS Safari settings -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- @2x -->
    <link rel="apple-touch-icon" sizes="40x40" type="image/png" href="app/images/icons/novnc-ios-40.png">
    <link rel="apple-touch-icon" sizes="58x58" type="image/png" href="app/images/icons/novnc-ios-58.png">
    <link rel="apple-touch-icon" sizes="80x80" type="image/png" href="app/images/icons/novnc-ios-80.png">
    <link rel="apple-touch-icon" sizes="120x120" type="image/png" href="app/images/icons/novnc-ios-120.png">
    <link rel="apple-touch-icon" sizes="152x152" type="image/png" href="app/images/icons/novnc-ios-152.png">
    <link rel="apple-touch-icon" sizes="167x167" type="image/png" href="app/images/icons/novnc-ios-167.png">
    <!-- @3x -->
    <link rel="apple-touch-icon" sizes="60x60" type="image/png" href="app/images/icons/novnc-ios-60.png">
    <link rel="apple-touch-icon" sizes="87x87" type="image/png" href="app/images/icons/novnc-ios-87.png">
    <link rel="apple-touch-icon" sizes="120x120" type="image/png" href="app/images/icons/novnc-ios-120.png">
    <link rel="apple-touch-icon" sizes="180x180" type="image/png" href="app/images/icons/novnc-ios-180.png">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="app/styles/constants.css">
    <link rel="stylesheet" href="app/styles/base.css">
    <link rel="stylesheet" href="app/styles/input.css">

    <!-- Images that will later appear via CSS -->
    <link rel="preload" as="image" href="app/images/info.svg">
    <link rel="preload" as="image" href="app/images/error.svg">
    <link rel="preload" as="image" href="app/images/warning.svg">

    <script type="module" crossorigin="anonymous" src="app/error-handler.js"></script>

    <script type="module">
        import UI from "./app/ui.js";
        import * as Log from './core/util/logging.js';

        let response;

        let defaults = {};
        let mandatory = {};

        // Default settings will be loaded from defaults.json. Mandatory
        // settings will be loaded from mandatory.json, which the user
        // cannot change.

        try {
            response = await fetch('./defaults.json');
            if (!response.ok) {
                throw Error("" + response.status + " " + response.statusText);
            }

            defaults = await response.json();
        } catch (err) {
            Log.Error("Couldn't fetch defaults.json: " + err);
        }

        try {
            response = await fetch('./mandatory.json');
            if (!response.ok) {
                throw Error("" + response.status + " " + response.statusText);
            }

            mandatory = await response.json();
        } catch (err) {
            Log.Error("Couldn't fetch mandatory.json: " + err);
        }

        // You can also override any defaults you need here:
        //
        // defaults['host'] = 'vnc.example.com';

        // Or force a specific setting, preventing the user from
        // changing it:
        //
        // mandatory['view_only'] = true;

        // See docs/EMBEDDING.md for a list of possible settings.

        UI.start({ settings: { defaults: defaults,
                               mandatory: mandatory } });
    </script>
</head>

<body>

    <div id="noVNC_fallback_error" class="noVNC_center">
        <div>
            <div>noVNC encountered an error:</div>
            <br>
            <div id="noVNC_fallback_errormsg"></div>
        </div>
    </div>

    <!-- noVNC control bar -->
    <div id="noVNC_control_bar_anchor" class="noVNC_vcenter">

        <div id="noVNC_control_bar">
            
            <div id="noVNC_control_bar_handle" title="Hide/Show the control bar"><div></div></div>

            <div class="noVNC_scroll">

            <h1 class="noVNC_logo" translate="no"><span>no</span><br>VNC</h1>

            <hr>

            <!-- Drag/Pan the viewport -->
            <input type="image" alt="Drag" src="app/images/drag.svg"
                id="noVNC_view_drag_button" class="noVNC_button noVNC_hidden"
                title="Move/Drag viewport">

            <!--noVNC touch device only buttons-->
            <div id="noVNC_mobile_buttons">
                <input type="image" alt="Keyboard" src="app/images/keyboard.svg"
                    id="noVNC_keyboard_button" class="noVNC_button" title="Show keyboard">
            </div>

            <!-- ===== TH√äM CODE C·ª¶A B·∫†N V√ÄO ƒê√ÇY ===== -->
            <div class="noVNC_setting">
                <label for="noVNC_mouse_mode">Ch·∫ø ƒë·ªô chu·ªôt:</label>
                <select id="noVNC_mouse_mode">
                    <option value="touch">C·∫£m ·ª©ng</option>
                    <option value="normal" selected>Chu·ªôt th∆∞·ªùng</option>
                </select>
            </div>

            <button id="noVNC_toggle_keyboard" class="noVNC_button">
                <span>üì± B√†n ph√≠m ·∫£o</span>
            </button>
            <!-- ===== K·∫æT TH√öC PH·∫¶N TH√äM ===== -->

            <!-- Extra manual keys -->
            <input type="image" alt="Extra keys" src="app/images/toggleextrakeys.svg"
                id="noVNC_toggle_extra_keys_button" class="noVNC_button"
                title="Show extra keys">
            <div class="noVNC_vcenter">
            <div id="noVNC_modifiers" class="noVNC_panel">
                <input type="image" alt="Ctrl" src="app/images/ctrl.svg"
                    id="noVNC_toggle_ctrl_button" class="noVNC_button"
                    title="Toggle Ctrl">
                <input type="image" alt="Alt" src="app/images/alt.svg"
                    id="noVNC_toggle_alt_button" class="noVNC_button"
                    title="Toggle Alt">
                <input type="image" alt="Windows" src="app/images/windows.svg"
                    id="noVNC_toggle_windows_button" class="noVNC_button"
                    title="Toggle Windows">
                <input type="image" alt="Tab" src="app/images/tab.svg"
                    id="noVNC_send_tab_button" class="noVNC_button"
                    title="Send Tab">
                <input type="image" alt="Esc" src="app/images/esc.svg"
                    id="noVNC_send_esc_button" class="noVNC_button"
                    title="Send Escape">
                <input type="image" alt="Ctrl+Alt+Del" src="app/images/ctrlaltdel.svg"
                    id="noVNC_send_ctrl_alt_del_button" class="noVNC_button"
                    title="Send Ctrl-Alt-Del">
            </div>
            </div>

            <!-- Shutdown/Reboot -->
            <input type="image" alt="Shutdown/Reboot" src="app/images/power.svg"
                id="noVNC_power_button" class="noVNC_button"
                title="Shutdown/Reboot...">
            <div class="noVNC_vcenter">
            <div id="noVNC_power" class="noVNC_panel">
                <div class="noVNC_heading">
                    <img alt="" src="app/images/power.svg"> Power
                </div>
                <input type="button" id="noVNC_shutdown_button" value="Shutdown">
                <input type="button" id="noVNC_reboot_button" value="Reboot">
                <input type="button" id="noVNC_reset_button" value="Reset">
            </div>
            </div>

            <!-- Clipboard -->
            <input type="image" alt="Clipboard" src="app/images/clipboard.svg"
                id="noVNC_clipboard_button" class="noVNC_button"
                title="Clipboard">
            <div class="noVNC_vcenter">
            <div id="noVNC_clipboard" class="noVNC_panel">
                <div class="noVNC_heading">
                    <img alt="" src="app/images/clipboard.svg"> Clipboard
                </div>
                <p class="noVNC_subheading">
                    Edit clipboard content in the textarea below.
                </p>
                <textarea id="noVNC_clipboard_text" rows=5></textarea>
            </div>
            </div>

            <!-- Toggle fullscreen -->
            <input type="image" alt="Full screen" src="app/images/fullscreen.svg"
                id="noVNC_fullscreen_button" class="noVNC_button noVNC_hidden"
                title="Full screen">

            <!-- Settings -->
            <input type="image" alt="Settings" src="app/images/settings.svg"
                id="noVNC_settings_button" class="noVNC_button"
                title="Settings">
            <div class="noVNC_vcenter">
            <div id="noVNC_settings" class="noVNC_panel">
                <div class="noVNC_heading">
                    <img alt="" src="app/images/settings.svg"> Settings
                </div>
                <ul>
                    <li>
                        <label>
                            <input id="noVNC_setting_shared" type="checkbox"
                                   class="toggle">
                            Shared mode
                        </label>
                    </li>
                    <li>
                        <label>
                            <input id="noVNC_setting_view_only" type="checkbox"
                                   class="toggle">
                            View only
                        </label>
                    </li>
                    <li><hr></li>
                    <li>
                        <label>
                            <input id="noVNC_setting_view_clip" type="checkbox"
                                   class="toggle">
                            Clip to window
                        </label>
                    </li>
                    <li>
                        <label for="noVNC_setting_resize">Scaling mode:</label>
                        <select id="noVNC_setting_resize" name="vncResize">
                            <option value="off">None</option>
                            <option value="scale">Local scaling</option>
                            <option value="remote">Remote resizing</option>
                        </select>
                    </li>
                    <li><hr></li>
                    <li>
                        <div class="noVNC_expander">Advanced</div>
                        <div><ul>
                            <li>
                                <label for="noVNC_setting_quality">Quality:</label>
                                <input id="noVNC_setting_quality" type="range" min="0" max="9" value="6">
                            </li>
                            <li>
                                <label for="noVNC_setting_compression">Compression level:</label>
                                <input id="noVNC_setting_compression" type="range" min="0" max="9" value="2">
                            </li>
                            <li><hr></li>
                            <li>
                                <label for="noVNC_setting_repeaterID">Repeater ID:</label>
                                <input id="noVNC_setting_repeaterID" type="text" value="">
                            </li>
                            <li>
                                <div class="noVNC_expander">WebSocket</div>
                                <div><ul>
                                    <li>
                                        <label>
                                            <input id="noVNC_setting_encrypt" type="checkbox"
                                                   class="toggle">
                                            Encrypt
                                        </label>
                                    </li>
                                    <li>
                                        <label for="noVNC_setting_host">Host:</label>
                                        <input id="noVNC_setting_host">
                                    </li>
                                    <li>
                                        <label for="noVNC_setting_port">Port:</label>
                                        <input id="noVNC_setting_port" type="number">
                                    </li>
                                    <li>
                                        <label for="noVNC_setting_path">Path:</label>
                                        <input id="noVNC_setting_path" type="text" value="websockify">
                                    </li>
                                </ul></div>
                            </li>
                            <li><hr></li>
                            <li>
                                <label>
                                    <input id="noVNC_setting_reconnect" type="checkbox"
                                           class="toggle">
                                    Automatic reconnect
                                </label>
                            </li>
                            <li>
                                <label for="noVNC_setting_reconnect_delay">Reconnect delay (ms):</label>
                                <input id="noVNC_setting_reconnect_delay" type="number">
                            </li>
                            <li><hr></li>
                            <li>
                                <label>
                                    <input id="noVNC_setting_show_dot" type="checkbox"
                                           class="toggle">
                                    Show dot when no cursor
                                </label>
                            </li>
                            <li><hr></li>
                            <!-- Logging selection dropdown -->
                            <li>
                                <label>Logging:
                                    <select id="noVNC_setting_logging" name="vncLogging">
                                    </select>
                                </label>
                            </li>
                        </ul></div>
                    </li>
                    <li class="noVNC_version_separator"><hr></li>
                    <li class="noVNC_version_wrapper">
                        <span>Version:</span>
                        <span class="noVNC_version"></span>
                    </li>
                </ul>
            </div>
            </div>

            <!-- Connection controls -->
            <input type="image" alt="Disconnect" src="app/images/disconnect.svg"
                id="noVNC_disconnect_button" class="noVNC_button"
                title="Disconnect">

            </div>
        </div>

    </div> <!-- End of noVNC_control_bar -->

    <div id="noVNC_hint_anchor" class="noVNC_vcenter">
        <div id="noVNC_control_bar_hint">
        </div>
    </div>

    <!-- Status dialog -->
    <div id="noVNC_status"></div>

    <!-- Connect button -->
    <div class="noVNC_center">
        <div id="noVNC_connect_dlg">
            <p class="noVNC_logo" translate="no"><span>no</span>VNC</p>
            <div>
                <button id="noVNC_connect_button">
                    <img alt="" src="app/images/connect.svg"> Connect
                </button>
            </div>
        </div>
    </div>

    <!-- Server key verification dialog -->
    <div class="noVNC_center noVNC_connect_layer">
    <div id="noVNC_verify_server_dlg" class="noVNC_panel"><form>
        <div class="noVNC_heading">
            Server identity
        </div>
        <div>
            The server has provided the following identifying information:
        </div>
        <div id="noVNC_fingerprint_block">
            Fingerprint:
            <span id="noVNC_fingerprint"></span>
        </div>
        <div>
            Please verify that the information is correct and press
            "Approve". Otherwise press "Reject".
        </div>
        <div class="button_row">
            <input id="noVNC_approve_server_button" type="submit" value="Approve">
            <input id="noVNC_reject_server_button" type="button" value="Reject">
        </div>
    </form></div>
    </div>

    <!-- Password dialog -->
    <div class="noVNC_center noVNC_connect_layer">
    <div id="noVNC_credentials_dlg" class="noVNC_panel"><form>
        <div class="noVNC_heading">
            Credentials
        </div>
        <div id="noVNC_username_block">
            <label for="noVNC_username_input">Username:</label>
            <input id="noVNC_username_input">
        </div>
        <div id="noVNC_password_block">
            <label for="noVNC_password_input">Password:</label>
            <input id="noVNC_password_input" type="password">
        </div>
        <div class="button_row">
            <input id="noVNC_credentials_button" type="submit" value="Send credentials">
        </div>
    </form></div>
    </div>

    <!-- Transition screens -->
    <div id="noVNC_transition">
        <div id="noVNC_transition_text"></div>
        <div>
        <input type="button" id="noVNC_cancel_reconnect_button" value="Cancel">
        </div>
        <div class="noVNC_spinner"></div>
    </div>

    <!-- This is where the RFB elements will attach -->
    <div id="noVNC_container">
        <!-- Note that Google Chrome on Android doesn't respect any of these,
             html attributes which attempt to disable text suggestions on the
             on-screen keyboard. Let's hope Chrome implements the ime-mode
             style for example -->
        <textarea id="noVNC_keyboardinput" autocapitalize="off"
            autocomplete="off" spellcheck="false" tabindex="-1"></textarea>
    </div>

    <!-- ===== B√ÄN PH√çM ·∫¢O ===== -->
    <div id="noVNC_virtual_keyboard" style="display:none;">
        
        <!-- H√†ng Function Keys -->
        <div class="keyboard-row">
            <div class="key" data-key="Esc">Esc</div>
            <div class="key" data-key="F1">F1</div>
            <div class="key" data-key="F2">F2</div>
            <div class="key" data-key="F3">F3</div>
            <div class="key" data-key="F4">F4</div>
            <div class="key" data-key="F5">F5</div>
            <div class="key" data-key="F6">F6</div>
            <div class="key" data-key="F7">F7</div>
            <div class="key" data-key="F8">F8</div>
            <div class="key" data-key="F9">F9</div>
            <div class="key" data-key="F10">F10</div>
            <div class="key" data-key="F11">F11</div>
            <div class="key" data-key="F12">F12</div>
        </div>

        <!-- H√†ng s·ªë -->
        <div class="keyboard-row">
            <div class="key" data-key="`">` ~</div>
            <div class="key" data-key="1">1 !</div>
            <div class="key" data-key="2">2 @</div>
            <div class="key" data-key="3">3 #</div>
            <div class="key" data-key="4">4 $</div>
            <div class="key" data-key="5">5 %</div>
            <div class="key" data-key="6">6 ^</div>
            <div class="key" data-key="7">7 &</div>
            <div class="key" data-key="8">8 *</div>
            <div class="key" data-key="9">9 (</div>
            <div class="key" data-key="0">0 )</div>
            <div class="key" data-key="-">- _</div>
            <div class="key" data-key="=">= +</div>
            <div class="key" data-key="Backspace" style="width:80px;">Backspace</div>
        </div>

        <!-- H√†ng QWERTY -->
        <div class="keyboard-row">
            <div class="key" data-key="Tab" style="width:70px;">Tab</div>
            <div class="key" data-key="q">Q</div>
            <div class="key" data-key="w">W</div>
            <div class="key" data-key="e">E</div>
            <div class="key" data-key="r">R</div>
            <div class="key" data-key="t">T</div>
            <div class="key" data-key="y">Y</div>
            <div class="key" data-key="u">U</div>
            <div class="key" data-key="i">I</div>
            <div class="key" data-key="o">O</div>
            <div class="key" data-key="p">P</div>
            <div class="key" data-key="[">[ {</div>
            <div class="key" data-key="]">] }</div>
            <div class="key" data-key="\\">\\ |</div>
        </div>

        <!-- H√†ng ASDF -->
        <div class="keyboard-row">
            <div class="key" data-key="CapsLock" style="width:80px;">Caps</div>
            <div class="key" data-key="a">A</div>
            <div class="key" data-key="s">S</div>
            <div class="key" data-key="d">D</div>
            <div class="key" data-key="f">F</div>
            <div class="key" data-key="g">G</div>
            <div class="key" data-key="h">H</div>
            <div class="key" data-key="j">J</div>
            <div class="key" data-key="k">K</div>
            <div class="key" data-key="l">L</div>
            <div class="key" data-key=";">; :</div>
            <div class="key" data-key="'">' "</div>
            <div class="key" data-key="Enter" style="width:80px;">Enter</div>
        </div>

        <!-- H√†ng ZXCV -->
        <div class="keyboard-row">
            <div class="key" data-key="Shift" style="width:90px;">Shift</div>
            <div class="key" data-key="z">Z</div>
            <div class="key" data-key="x">X</div>
            <div class="key" data-key="c">C</div>
            <div class="key" data-key="v">V</div>
            <div class="key" data-key="b">B</div>
            <div class="key" data-key="n">N</div>
            <div class="key" data-key="m">M</div>
            <div class="key" data-key=",">, <</div>
            <div class="key" data-key=".">. ></div>
            <div class="key" data-key="/">/ ?</div>
            <div class="key" data-key="Shift" style="width:90px;">Shift</div>
        </div>

        <!-- H√†ng Space -->
        <div class="keyboard-row">
            <div class="key" data-key="Ctrl" style="width:70px;">Ctrl</div>
            <div class="key" data-key="Alt" style="width:70px;">Alt</div>
            <div class="key" data-key=" " style="width:200px;">Space</div>
            <div class="key" data-key="Alt" style="width:70px;">Alt</div>
            <div class="key" data-key="Ctrl" style="width:70px;">Ctrl</div>
        </div>

        <!-- N√∫t ƒë√≥ng -->
        <div class="keyboard-row">
            <button id="noVNC_close_keyboard" style="margin-top:10px; padding:8px 15px; background:#ff4444; color:white; border:none; border-radius:5px; cursor:pointer;">
                ƒê√≥ng b√†n ph√≠m
            </button>
        </div>
    </div>

    <audio id="noVNC_bell">
        <source src="app/sounds/bell.oga" type="audio/ogg">
        <source src="app/sounds/bell.mp3" type="audio/mpeg">
    </audio>

    <script>
        // ===== TH√äM JAVASCRIPT V√ÄO ƒê√ÇY =====
        document.addEventListener('DOMContentLoaded', function() {
            // Ch·ªù 1 gi√¢y ƒë·ªÉ ƒë·∫£m b·∫£o noVNC ƒë√£ load xong
            setTimeout(function() {
                // Bi·∫øn to√†n c·ª•c
                let mouseMode = 'normal';

                // H√†m x·ª≠ l√Ω ch·∫ø ƒë·ªô chu·ªôt
                function handleMouseModeChange() {
                    const select = document.getElementById('noVNC_mouse_mode');
                    if (select) {
                        mouseMode = select.value;
                        applyMouseSettings();
                        
                        // L∆∞u c√†i ƒë·∫∑t
                        localStorage.setItem('noVNC_mouse_mode', mouseMode);
                    }
                }

                // √Åp d·ª•ng c√†i ƒë·∫∑t chu·ªôt
                function applyMouseSettings() {
                    if (typeof UI === 'undefined' || !UI.rfb) {
                        console.log("Ch∆∞a k·∫øt n·ªëi VNC");
                        return;
                    }
                    
                    if (mouseMode === 'touch') {
                        // Ch·∫ø ƒë·ªô c·∫£m ·ª©ng
                        UI.rfb.clipViewport = true;
                        UI.rfb.dragViewport = true;
                        UI.rfb.scaleViewport = true;
                        UI.rfb.preventDefault = true;
                        console.log("ƒê√£ chuy·ªÉn sang ch·∫ø ƒë·ªô c·∫£m ·ª©ng");
                    } else {
                        // Ch·∫ø ƒë·ªô chu·ªôt th∆∞·ªùng
                        UI.rfb.clipViewport = false;
                        UI.rfb.dragViewport = false;
                        UI.rfb.scaleViewport = false;
                        UI.rfb.preventDefault = false;
                        console.log("ƒê√£ chuy·ªÉn sang ch·∫ø ƒë·ªô chu·ªôt th∆∞·ªùng");
                    }
                }

                // H√†m g·ª≠i ph√≠m
                function sendKey(key) {
                    if (typeof UI === 'undefined' || !UI.rfb) {
                        console.log("Ch∆∞a k·∫øt n·ªëi VNC, kh√¥ng th·ªÉ g·ª≠i ph√≠m");
                        return;
                    }
                    
                    const keyMap = {
                        'Esc': 0xFF1B,
                        'F1': 0xFFBE,
                        'F2': 0xFFBF,
                        'F3': 0xFFC0,
                        'F4': 0xFFC1,
                        'F5': 0xFFC2,
                        'F6': 0xFFC3,
                        'F7': 0xFFC4,
                        'F8': 0xFFC5,
                        'F9': 0xFFC6,
                        'F10': 0xFFC7,
                        'F11': 0xFFC8,
                        'F12': 0xFFC9,
                        'Enter': 0xFF0D,
                        'Tab': 0xFF09,
                        'Space': 0x0020,
                        'Backspace': 0xFF08,
                        'Delete': 0xFFFF,
                        'Insert': 0xFF63,
                        'Home': 0xFF50,
                        'End': 0xFF57,
                        'PageUp': 0xFF55,
                        'PageDown': 0xFF56,
                        'ArrowUp': 0xFF52,
                        'ArrowDown': 0xFF54,
                        'ArrowLeft': 0xFF51,
                        'ArrowRight': 0xFF53,
                        'Shift': 0xFFE1,
                        'Ctrl': 0xFFE3,
                        'Alt': 0xFFE9,
                        'CapsLock': 0xFFE5
                    };
                    
                    if (keyMap[key]) {
                        UI.rfb.sendKey(keyMap[key]);
                        console.log("ƒê√£ g·ª≠i ph√≠m: " + key);
                    } else if (key.length === 1) {
                        // G·ª≠i k√Ω t·ª± th√¥ng th∆∞·ªùng
                        UI.rfb.sendKey(key.charCodeAt(0));
                        console.log("ƒê√£ g·ª≠i k√Ω t·ª±: " + key);
                    }
                }

                // Kh·ªüi t·∫°o controls t√πy ch·ªânh
                function initCustomControls() {
                    console.log("ƒêang kh·ªüi t·∫°o controls t√πy ch·ªânh...");
                    
                    // Ch·∫ø ƒë·ªô chu·ªôt
                    const mouseModeSelect = document.getElementById('noVNC_mouse_mode');
                    if (mouseModeSelect) {
                        mouseModeSelect.addEventListener('change', handleMouseModeChange);
                        
                        // Load c√†i ƒë·∫∑t ƒë√£ l∆∞u
                        const savedMode = localStorage.getItem('noVNC_mouse_mode');
                        if (savedMode) {
                            mouseModeSelect.value = savedMode;
                            mouseMode = savedMode;
                        }
                    }
                    
                    // N√∫t b√†n ph√≠m ·∫£o
                    const toggleKeyboardBtn = document.getElementById('noVNC_toggle_keyboard');
                    const virtualKeyboard = document.getElementById('noVNC_virtual_keyboard');
                    const closeKeyboardBtn = document.getElementById('noVNC_close_keyboard');
                    
                    if (toggleKeyboardBtn && virtualKeyboard) {
                        toggleKeyboardBtn.addEventListener('click', function() {
                            virtualKeyboard.style.display = 
                                virtualKeyboard.style.display === 'none' ? 'block' : 'none';
                        });
                    }
                    
                    if (closeKeyboardBtn && virtualKeyboard) {
                        closeKeyboardBtn.addEventListener('click', function() {
                            virtualKeyboard.style.display = 'none';
                        });
                    }
                    
                    // S·ª± ki·ªán click ph√≠m ·∫£o
                    document.querySelectorAll('.key').forEach(key => {
                        key.addEventListener('click', function() {
                            const keyValue = this.getAttribute('data-key');
                            if (keyValue) {
                                sendKey(keyValue);
                                // Hi·ªáu ·ª©ng nh·∫•n ph√≠m
                                this.style.transform = 'translateY(4px)';
                                setTimeout(() => {
                                    this.style.transform = 'translateY(0)';
                                }, 100);
                            }
                        });
                    });

                    console.log("ƒê√£ kh·ªüi t·∫°o controls t√πy ch·ªânh th√†nh c√¥ng!");
                }

                // G·ªçi h√†m kh·ªüi t·∫°o
                initCustomControls();

            }, 1000);
        });
        // ===== K·∫æT TH√öC JAVASCRIPT =====
    </script>
</body>
</html>
